# 架构分析标准和规则

## 重复代码检测标准

### 文件重复
- **同名文件**: 不同目录下的同名文件视为潜在重复
- **相似内容**: 文件内容相似度>80%视为重复
- **功能重复**: 不同文件实现相同功能视为重复

### 函数重复（Python）
- **相同签名**: 函数名和参数数量相同
- **相似逻辑**: 函数体结构相似度>70%视为重复
- **相同功能**: 不同函数实现相同业务逻辑

## 实现一致性检查

### 配置文件一致性
- **结构一致性**: 同类型配置文件应具有相同的键结构
- **命名一致性**: 配置项命名应遵循统一规范
- **值格式一致性**: 相同配置项的值格式应保持一致

### API接口一致性
- **响应格式**: 相同类型API的响应格式应一致
- **错误处理**: 错误码和错误消息格式应统一
- **参数验证**: 相同参数的验证规则应一致

## 架构风险评估

### 复杂度风险
- **高**: 模块文件数>20或单个文件>1000行
- **中**: 模块文件数>10或单个文件>500行
- **低**: 模块文件数>5且结构清晰

### 文档风险
- **高**: 无README或README<100字符
- **中**: README缺少功能描述或使用示例
- **低**: README结构不完整

### 组织风险
- **高**: 模块层级>5层或循环依赖
- **中**: 文件组织混乱或职责不清
- **低**: 目录结构可优化

## 代码质量标准

### 命名规范
- **文件命名**: 使用小写字母和下划线
- **函数命名**: 使用动词开头的驼峰命名
- **变量命名**: 使用描述性名称，避免缩写

### 文档要求
- **模块文档**: 必须包含功能描述、文件结构、使用示例
- **函数文档**: 公共函数必须包含docstring
- **变更记录**: 重要变更必须记录在README中

### 依赖管理
- **内部依赖**: 明确标注依赖的其他模块
- **外部依赖**: 使用requirements.txt或package.json管理
- **版本控制**: 关键依赖应指定版本范围