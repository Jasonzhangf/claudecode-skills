# å°è¯´ç”Ÿæˆå™¨ v2.0

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

å°è¯´ç”Ÿæˆå™¨æ˜¯ä¸€ä¸ªä¸“ä¸šçš„AIè¾…åŠ©å°è¯´åˆ›ä½œå·¥å…·ï¼Œæ”¯æŒé•¿ç¯‡å°è¯´çš„å®Œæ•´åˆ›ä½œæµç¨‹ã€‚v2.0ç‰ˆæœ¬å¼•å…¥äº†æ™ºèƒ½å¯¼å…¥ã€ç»Ÿä¸€APIã€ç« èŠ‚è®°å¿†åˆ†æç­‰å¤šé¡¹åˆ›æ–°åŠŸèƒ½ã€‚

### âœ¨ æ ¸å¿ƒä»·å€¼

- **æ™ºèƒ½å†…å®¹ç®¡ç†**: è‡ªåŠ¨åŒ–è®¾å®šå¯¼å…¥å’Œç« èŠ‚è®°å¿†ç®¡ç†
- **AIé›†æˆæ¶æ„**: æ”¯æŒå¤šç§AIæœåŠ¡çš„æ— ç¼é›†æˆ
- **ç»Ÿä¸€æ“ä½œæ¥å£**: ç®€åŒ–å¤æ‚çš„åˆ›ä½œæµç¨‹
- **æ•°æ®å®Œæ•´æ€§**: ç¡®ä¿è§’è‰²ä¸€è‡´æ€§å’Œæ•…äº‹è¿è´¯æ€§

## ğŸš€ v2.0 é‡å¤§æ›´æ–°

### ğŸ†• æ ¸å¿ƒæ–°åŠŸèƒ½

1. **æ™ºèƒ½å¯¼å…¥è®¾å®šç³»ç»Ÿ**
   - è‡ªåŠ¨æ‰«æå¤–éƒ¨ç›®å½•ä¸­çš„æ–‡ä»¶
   - AIè¾…åŠ©è¯†åˆ«å’Œåˆ†ç±»è®¾å®šå†…å®¹
   - æ”¯æŒå¢é‡æ›´æ–°å’Œæ™ºèƒ½åˆå¹¶
   - æ”¯æŒå¤šç§æ–‡ä»¶æ ¼å¼ï¼ˆ.md, .txt, .docxç­‰ï¼‰

2. **ç»Ÿä¸€APIæ¥å£**
   - æ‰€æœ‰åŠŸèƒ½é€šè¿‡ç»Ÿä¸€æ¥å£è®¿é—®
   - æ ‡å‡†åŒ–çš„è¯·æ±‚å“åº”æ ¼å¼
   - æ”¯æŒJSONè¯·æ±‚æ–‡ä»¶
   - å®Œæ•´çš„é”™è¯¯å¤„ç†å’ŒçŠ¶æ€ç®¡ç†

3. **ç« èŠ‚è®°å¿†åˆ†æ**
   - è‡ªåŠ¨è§£æç« èŠ‚å†…å®¹
   - ç”Ÿæˆå¤šç»´åº¦è®°å¿†ï¼ˆæƒ…æ„Ÿã€è¡ŒåŠ¨ã€å…³ç³»ã€å†²çªã€æˆé•¿ï¼‰
   - æ™ºèƒ½æƒ…æ„Ÿæƒé‡è®¡ç®—
   - è®°å¿†å…³ç³»ç½‘ç»œæ„å»º

4. **æ™ºèƒ½ç¼–è¾‘åŠŸèƒ½**
   - æ”¯æŒæœ¬åœ°å’ŒAIè¾…åŠ©ç¼–è¾‘
   - ä¸Šä¸‹æ–‡æ„ŸçŸ¥æ›´æ–°
   - å¤šç§ç¼–è¾‘æ¨¡å¼ï¼ˆæ›¿æ¢ã€è¿½åŠ ã€æ’å…¥ã€å‰ç½®ï¼‰
   - è‡ªåŠ¨ç»´æŠ¤ä¸€è‡´æ€§

5. **è®°å¿†ç®¡ç†ç³»ç»Ÿ**
   - å¤šç»´åº¦è®°å¿†å±•ç¤ºï¼ˆæŒ‰ç±»å‹ã€æ—¶é—´çº¿ã€å…³è”ç½‘ç»œï¼‰
   - è®°å¿†ç»Ÿè®¡å’Œåˆ†æ
   - æƒ…æ„Ÿæƒé‡ç®¡ç†
   - è®°å¿†å‹ç¼©å’Œé•¿æœŸå­˜å‚¨

### ğŸ”§ æŠ€æœ¯æ¶æ„å‡çº§

- **æ¨¡å—åŒ–è®¾è®¡**: æ¸…æ™°çš„æ¨¡å—èŒè´£åˆ†ç¦»
- **AIé›†æˆæ¶æ„**: æ ‡å‡†åŒ–AIä»»åŠ¡æ¥å£
- **æ•°æ®ç®¡ç†å¢å¼º**: æ›´å¼ºçš„æ•°æ®è§£æå’Œæ›´æ–°èƒ½åŠ›
- **é”™è¯¯å¤„ç†**: å®Œæ•´çš„å¼‚å¸¸å¤„ç†å’Œæ—¥å¿—è®°å½•
- **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æ–‡ä»¶æ“ä½œå’Œå†…å­˜ä½¿ç”¨

## ğŸ“ é¡¹ç›®ç»“æ„

```
novel-generator/
â”œâ”€â”€ SKILL.md                    # æŠ€èƒ½å®Œæ•´ä»‹ç»
â”œâ”€â”€ README_V2.md               # v2.0é¡¹ç›®è¯´æ˜
â”œâ”€â”€ USAGE_EXAMPLES.md           # è¯¦ç»†ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ CHANGELOG_V2.md             # v2.0æ›´æ–°æ—¥å¿—
â”œâ”€â”€ INSTALLATION.md              # å®‰è£…æŒ‡å—
â”œâ”€â”€ install.sh                  # è‡ªåŠ¨å®‰è£…è„šæœ¬
â”œâ”€â”€ create_package.sh           # åˆ›å»ºå®‰è£…åŒ…è„šæœ¬
â”œâ”€â”€ QUICKSTART.md               # å¿«é€Ÿå¼€å§‹æŒ‡å—
â”œâ”€â”€ scripts/                    # æ ¸å¿ƒè„šæœ¬
â”‚   â”œâ”€â”€ unified_api.py         # ç»Ÿä¸€APIæ¥å£
â”‚   â”œâ”€â”€ chapter_memory_analyzer.py # ç« èŠ‚è®°å¿†åˆ†æå™¨
â”‚   â”œâ”€â”€ settings_display_manager.py # è®¾å®šæ˜¾ç¤ºç®¡ç†å™¨
â”‚   â”œâ”€â”€ memory_display_manager.py   # è®°å¿†æ˜¾ç¤ºç®¡ç†å™¨
â”‚   â”œâ”€â”€ chapter_manager.py       # ç« èŠ‚ç®¡ç†å™¨
â”‚   â”œâ”€â”€ import_manager.py        # å¯¼å…¥ç®¡ç†å™¨
â”‚   â”œâ”€â”€ session_manager.py       # ä¼šè¯ç®¡ç†å™¨
â”‚   â”œâ”€â”€ compression_engine.py    # å‹ç¼©å¼•æ“
â”‚   â””â”€â”€ data_managers/          # æ•°æ®ç®¡ç†å™¨
â”‚       â”œâ”€â”€ worldbuilder.py     # ä¸–ç•Œè§‚ç®¡ç†
â”‚       â”œâ”€â”€ character_manager.py # è§’è‰²ç®¡ç†
â”‚       â”œâ”€â”€ memory_manager.py    # è®°å¿†ç®¡ç†
â”‚       â”œâ”€â”€ plot_manager.py      # æƒ…èŠ‚ç®¡ç†
â”‚       â”œâ”€â”€ environment_manager.py # ç¯å¢ƒç®¡ç†
â”‚       â””â”€â”€ style_manager.py      # é£æ ¼ç®¡ç†
â”œâ”€â”€ references/                 # å‚è€ƒæ–‡æ¡£
â”œâ”€â”€ assets/                     # èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ examples/               # ç¤ºä¾‹é¡¹ç›®
â”‚   â””â”€â”€ templates/              # æ¨¡æ¿æ–‡ä»¶
â””â”€â”€ test_updated_functions.py  # åŠŸèƒ½æµ‹è¯•è„šæœ¬
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…è¦æ±‚

- Python 3.7+
- Claude Code (æ¨è)
- æ”¯æŒçš„å¹³å°: macOS, Linux, Windows

### å®‰è£…æ­¥éª¤

1. **ä¸‹è½½å®‰è£…åŒ…**
   ```bash
   # è·å– novel-generator-v2.zip
   ```

2. **è§£å‹å®‰è£…**
   ```bash
   unzip novel-generator-v2.zip
   cd novelgen
   ```

3. **è‡ªåŠ¨å®‰è£…**
   ```bash
   ./install.sh
   ```

4. **éªŒè¯å®‰è£…**
   ```bash
   python3 scripts/unified_api.py --request-json '{"action": "system.status"}'
   ```

### åŸºç¡€ä½¿ç”¨

#### 1. åˆ›å»ºå°è¯´é¡¹ç›®
```bash
mkdir my-novel
cd my-novel
```

#### 2. åˆ›å»ºè®¾å®š
```bash
# åˆ›å»ºä¸–ç•Œè§‚
python3 ~/.claude/skills/novel-generator/scripts/data_managers/worldbuilder.py --action create

# åˆ›å»ºè§’è‰²
python3 ~/.claude/skills/novel-generator/scripts/data_managers/character_manager.py --action create --name "ä¸»è§’" --type main
```

#### 3. æŸ¥çœ‹è®¾å®š
```bash
# æ˜¾ç¤ºæ‰€æœ‰è®¾å®š
python3 ~/.claude/skills/novel-generator/scripts/settings_display_manager.py --action list

# æ˜¾ç¤ºä¸–ç•Œè§‚
python3 ~/.claude/skills/novel-generator/scripts/settings_display_manager.py --type worldview
```

## ğŸ†• v2.0æ–°åŠŸèƒ½ä½¿ç”¨

### æ™ºèƒ½å¯¼å…¥è®¾å®š

```bash
# æ‰«æå¹¶å¯¼å…¥æ‰€æœ‰è®¾å®š
python3 scripts/unified_api.py --request-json '{
  "action": "import.from_directory",
  "target_directory": "./materials"
}'

# å¯¼å…¥ç‰¹å®šç±»å‹çš„è®¾å®š
python3 scripts/unified_api.py --request-json '{
  "action": "import.from_directory",
  "target_directory": "./materials",
  "specific_setting": "character"
}'
```

### ç« èŠ‚è®°å¿†åˆ†æ

```bash
# åˆ†æç¬¬1ç« å†…å®¹
python3 scripts/chapter_memory_analyzer.py --action analyze --chapter 1

# åº”ç”¨ç”Ÿæˆçš„è®°å¿†
python3 scripts/chapter_memory_analyzer.py --action apply --chapter 1
```

### æ™ºèƒ½ç¼–è¾‘åŠŸèƒ½

```bash
# è¿½åŠ å†…å®¹
python3 scripts/unified_api.py --request-json '{
  "action": "chapter.intelligent_edit",
  "chapter_number": 1,
  "edit_request": {
    "content": "è¿™æ˜¯æ–°å¢çš„å†…å®¹...",
    "edit_mode": "append",
    "requires_ai": false
  }
}'

# AIè¾…åŠ©ç¼–è¾‘
python3 scripts/unified_api.py --request-json '{
  "action": "chapter.intelligent_edit",
  "chapter_number": 1,
  "edit_request": {
    "edit_instructions": "è¯·æ”¹è¿›è¿™æ®µæ–‡å­—çš„è¡¨è¾¾",
    "requires_ai": true
  }
}'
```

### è®°å¿†ç®¡ç†

```bash
# æ˜¾ç¤ºè§’è‰²è®°å¿†
python3 scripts/memory_display_manager.py --identifier "ä¸»è§’" --type character_all

# æ˜¾ç¤ºè®°å¿†æ—¶é—´çº¿
python3 scripts/memory_display_manager.py --identifier "ä¸»è§’" --type timeline

# è·å–è®°å¿†ç»Ÿè®¡
python3 scripts/memory_display_manager.py --action stats --identifier "ä¸»è§’"
```

## ğŸ¯ æ ¸å¿ƒåœºæ™¯

### 1. ä»ç°æœ‰ç´ æå¯¼å…¥è®¾å®š
```bash
# å°†ç°æœ‰èµ„æ–™è½¬æ¢ä¸ºé¡¹ç›®è®¾å®š
python3 scripts/import_manager.py --action import-from-directory \
  --target-directory "./existing_materials"

# å¤„ç†AIåˆ†æç»“æœï¼ˆå¦‚æœè¿”å›ai_task_requiredï¼‰
python3 scripts/import_manager.py --action process-ai-result \
  --ai-result-file "ai_analysis_result.json"
```

### 2. ç« èŠ‚åˆ›ä½œä¸è®°å¿†ç®¡ç†
```bash
# åˆ›å»ºç« èŠ‚
python3 scripts/chapter_manager.py --action create --chapter 1 --title "ç¬¬ä¸€ç« "

# å†™ä½œå®Œæˆååˆ†æè®°å¿†
python3 scripts/chapter_memory_analyzer.py --action apply --chapter 1

# æŸ¥çœ‹ç”Ÿæˆçš„è®°å¿†
python3 scripts/memory_display_manager.py --identifier "ä¸»è§’" --type character_all
```

### 3. è§’è‰²å…³ç³»ç®¡ç†
```bash
# æŸ¥çœ‹è§’è‰²å…³ç³»
python3 scripts/data_managers/character_manager.py --action load --name "ä¸»è§’"

# æ·»åŠ è§’è‰²å…³ç³»
python3 scripts/settings_manager.py --category character --action add_relationship \
  --target "ä¸»è§’" --character2 "é…è§’" --relationship-type "æœ‹å‹"
```

### 4. é•¿ç¯‡å°è¯´ç®¡ç†
```bash
# æŸ¥çœ‹è¿›åº¦
python3 scripts/session_manager.py --action progress

# ç« èŠ‚è·³è½¬
python3 scripts/chapter_manager.py --action jump --chapter 5

# å‹ç¼©è®°å¿†ï¼ˆå¦‚æœéœ€è¦ï¼‰
python3 scripts/memory_manager.py --action compress --character "ä¸»è§’"
```

## ğŸ¤– AIé›†æˆ

### AIä»»åŠ¡ç±»å‹

ç³»ç»Ÿæ”¯æŒä»¥ä¸‹AIä»»åŠ¡ç±»å‹ï¼š

1. **content_analysis**: åˆ†ææ–‡ä»¶å†…å®¹å¹¶æå–è®¾å®š
2. **content_edit**: æ™ºèƒ½ç¼–è¾‘å’Œæ”¹è¿›å†…å®¹
3. **generate_summary**: ç”Ÿæˆå†…å®¹æ‘˜è¦
4. **memory_analysis**: åˆ†æè®°å¿†å†…å®¹å’Œå…³è”

### AIä»»åŠ¡å¤„ç†æµç¨‹

```python
# 1. å‘èµ·AIä»»åŠ¡è¯·æ±‚
result = api.process_request({
    "action": "import.from_directory",
    "target_directory": "./materials"
})

# 2. å¦‚æœéœ€è¦AIå¤„ç†
if result["status"] == "ai_task_required":
    ai_task = result["ai_task"]
    # è°ƒç”¨ä½ çš„AIæœåŠ¡
    ai_result = your_ai_service.process_task(ai_task)

    # 3. åº”ç”¨AIç»“æœ
    final_result = api.process_request({
        "action": "import.process_ai_result",
        "ai_result": ai_result
    })
```

## ğŸ“Š æ€§èƒ½ç‰¹æ€§

### æ•°æ®ç®¡ç†
- **å¢é‡æ›´æ–°**: æ”¯æŒéƒ¨åˆ†æ›´æ–°è€Œéå®Œå…¨æ›¿æ¢
- **æ™ºèƒ½è§£æ**: è‡ªåŠ¨è§£æå’Œåˆå¹¶ç°æœ‰å†…å®¹
- **æ ¼å¼æ ‡å‡†åŒ–**: ç»Ÿä¸€çš„æ•°æ®æ ¼å¼å’Œæ¥å£
- **ç‰ˆæœ¬æ§åˆ¶**: å®Œæ•´çš„æ“ä½œæ—¥å¿—å’Œç‰ˆæœ¬ç®¡ç†

### AIé›†æˆ
- **æ ‡å‡†æ¥å£**: ç»Ÿä¸€çš„AIä»»åŠ¡è¯·æ±‚æ ¼å¼
- **å¼‚æ­¥å¤„ç†**: æ”¯æŒå¼‚æ­¥AIä»»åŠ¡å¤„ç†
- **é”™è¯¯æ¢å¤**: AIå¤±è´¥æ—¶çš„é™çº§å¤„ç†
- **æ‰©å±•æ€§**: æ˜“äºæ·»åŠ æ–°çš„AIæœåŠ¡

### è®°å¿†ç³»ç»Ÿ
- **å¤šç»´åˆ†ç±»**: æŒ‰ç±»å‹ã€æ—¶é—´ã€å…³è”ç­‰å¤šç»´åº¦åˆ†ç±»
- **æ™ºèƒ½æƒé‡**: è‡ªåŠ¨è®¡ç®—è®°å¿†é‡è¦æ€§å’Œæƒ…æ„Ÿæƒé‡
- **å…³ç³»ç½‘ç»œ**: æ„å»ºè®°å¿†é—´çš„å…³ç³»ç½‘ç»œ
- **å‹ç¼©å­˜å‚¨**: é•¿æœŸè®°å¿†çš„æ™ºèƒ½å‹ç¼©å­˜å‚¨

## ğŸ”§ å¼€å‘å’Œæ‰©å±•

### ä»£ç ç»“æ„
- **æ¨¡å—åŒ–è®¾è®¡**: æ¸…æ™°çš„æ¨¡å—èŒè´£åˆ†ç¦»
- **ç»Ÿä¸€æ¥å£**: æ ‡å‡†åŒ–çš„APIæ¥å£è®¾è®¡
- **é…ç½®é©±åŠ¨**: åŸºäºé…ç½®æ–‡ä»¶çš„åŠŸèƒ½æ§åˆ¶
- **æ’ä»¶åŒ–**: æ˜“äºæ‰©å±•æ–°åŠŸèƒ½

### æ·»åŠ æ–°åŠŸèƒ½

1. **åˆ›å»ºæ–°æ¨¡å—**: åœ¨ `scripts/` æˆ– `scripts/data_managers/` ä¸­åˆ›å»ºæ–°æ¨¡å—
2. **é›†æˆAPI**: åœ¨ `unified_api.py` ä¸­æ·»åŠ æ–°çš„å¤„ç†é€»è¾‘
3. **æ›´æ–°æ–‡æ¡£**: æ›´æ–°ç›¸å…³æ–‡æ¡£å’Œç¤ºä¾‹
4. **æµ‹è¯•éªŒè¯**: åˆ›å»ºæµ‹è¯•è„šæœ¬éªŒè¯åŠŸèƒ½

### è‡ªå®šä¹‰AIæœåŠ¡

```python
class CustomAIClient:
    def process_task(self, ai_task):
        task_type = ai_task["task_type"]

        if task_type == "content_analysis":
            return self.analyze_content(ai_task)
        elif task_type == "content_edit":
            return self.edit_content(ai_task)
        # æ·»åŠ æ›´å¤šä»»åŠ¡ç±»å‹...
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **Pythonç¯å¢ƒé—®é¢˜**
   ```bash
   # æ£€æŸ¥Pythonç‰ˆæœ¬
   python3 --version

   # æ£€æŸ¥æ¨¡å—è·¯å¾„
   python3 -c "import sys; print(sys.path)"
   ```

2. **æƒé™é—®é¢˜**
   ```bash
   # è®¾ç½®æ‰§è¡Œæƒé™
   chmod +x scripts/*.py
   chmod +x scripts/data_managers/*.py
   ```

3. **æ¨¡å—å¯¼å…¥é”™è¯¯**
   ```bash
   # æ£€æŸ¥æ–‡ä»¶ç»“æ„
   ls -la scripts/data_managers/

   # æ£€æŸ¥Pythonæ¨¡å—
   python3 -c "from data_managers.character_manager import CharacterManager"
   ```

### è°ƒè¯•æ¨¡å¼

```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
export NOVELGEN_DEBUG=true

# è¿è¡ŒåŠŸèƒ½
python3 scripts/unified_api.py --request-json '{"action": "system.status"}'
```

## ğŸ“ˆ è·¯çº¿å›¾

### v2.1 è®¡åˆ’åŠŸèƒ½
- Webç•Œé¢æ”¯æŒ
- å¤šè¯­è¨€è®¾å®šæ”¯æŒ
- åä½œç¼–è¾‘åŠŸèƒ½
- ç‰ˆæœ¬æ§åˆ¶é›†æˆ

### v2.2 è®¡åˆ’åŠŸèƒ½
- æ™ºèƒ½è§’è‰²å¯¹è¯ç”Ÿæˆ
- æƒ…èŠ‚è‡ªåŠ¨æ¨å¯¼
- å¤šç»“å±€åˆ†æ”¯ç®¡ç†
- å‡ºç‰ˆæ ¼å¼å¯¼å‡º

## ğŸ¤ è´¡çŒ®æŒ‡å—

### è´¡çŒ®æ–¹å¼
1. **æŠ¥å‘Šé—®é¢˜**: åœ¨GitHub Issuesä¸­æŠ¥å‘Šbug
2. **åŠŸèƒ½å»ºè®®**: æå‡ºæ–°åŠŸèƒ½æƒ³æ³•
3. **ä»£ç è´¡çŒ®**: æäº¤Pull Request
4. **æ–‡æ¡£æ”¹è¿›**: å®Œå–„æ–‡æ¡£å’Œç¤ºä¾‹

### å¼€å‘ç¯å¢ƒ
```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd novel-generator

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# è¿è¡Œæµ‹è¯•
python3 test_updated_functions.py
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ LICENSE æ–‡ä»¶ã€‚

## ğŸ¤ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ï¼

---

**ğŸ‰ å¼€å§‹ä½ çš„å°è¯´åˆ›ä½œä¹‹æ—…ï¼**